<?php
 use WHMCS\View\Menu\Item as MenuItem; use WHMCS\Database\Capsule; goto i4nxm; xZHX_: add_hook("\x44\x61\151\x6c\x79\x43\x72\x6f\x6e\x4a\x6f\x62", 1, function ($vars) { try { \WHMCS\Module\Server\Dockern8n\JobQueue::cleanup(7); } catch (Exception $e) { } }); goto rA4lI; y2vts: add_hook("\x41\146\164\145\162\x4d\x6f\x64\x75\154\x65\x43\x72\x65\141\164\x65", 1, function ($vars) { $moduleName = $vars["\x70\x61\162\x61\x6d\x73"]["\155\157\144\x75\x6c\x65\164\x79\x70\145"]; if ($moduleName !== "\x64\157\143\153\145\x72\x6e\70\156") { return; } $serviceId = $vars["\160\x61\x72\141\x6d\x73"]["\x73\x65\162\x76\x69\143\145\151\144"]; $customField = Capsule::table("\x74\142\154\143\x75\163\x74\157\x6d\x66\x69\x65\x6c\144\x73")->where("\162\x65\x6c\x69\144", $vars["\x70\141\x72\x61\155\x73"]["\x70\141\143\x6b\141\x67\x65\151\144"])->where("\146\151\x65\154\x64\156\141\155\145", "\123\x65\x72\x76\x69\143\x65\x20\104\145\164\141\151\x6c\x73")->where("\164\171\x70\x65", "\160\x72\x6f\144\x75\143\x74")->first(); if (!$customField) { return; } $value = Capsule::table("\164\x62\x6c\x63\165\x73\x74\x6f\155\146\151\145\x6c\x64\x73\x76\x61\154\x75\145\x73")->where("\x66\151\145\154\x64\x69\x64", $customField->id)->where("\162\x65\x6c\x69\x64", $serviceId)->value("\x76\141\154\165\x65"); if (!$value) { return; } $details = json_decode($value, true); $username = $details["\165\x73\145\162\156\141\155\x65"] ?? ''; $password = $details["\x70\x61\x73\x73\167\157\162\144"] ?? ''; if ($username && $password) { try { Capsule::table("\x74\142\x6c\150\x6f\x73\x74\151\156\147")->where("\x69\144", $serviceId)->update(array("\x75\163\145\x72\x6e\x61\155\145" => $username, "\x70\x61\x73\x73\167\157\x72\x64" => encrypt($password))); } catch (Exception $e) { } } }); goto xZHX_; rA4lI: add_hook("\101\x66\164\145\x72\103\162\x6f\156\x4a\x6f\142", 1, function ($vars) { try { $pendingJobs = \WHMCS\Module\Server\Dockern8n\JobQueue::getPending(5); foreach ($pendingJobs as $job) { \WHMCS\Module\Server\Dockern8n\JobQueue::update($job->id, "\160\162\157\143\x65\x73\x73\x69\x6e\147"); \WHMCS\Module\Server\Dockern8n\JobQueue::incrementAttempts($job->id); try { $params = json_decode($job->params, true) ?: array(); $result = null; switch ($job->action) { case "\x63\162\145\x61\x74\145\x5f\141\143\x63\x6f\165\156\x74": $result = dockern8n_CreateAccount($params); break; case "\x74\x65\x72\x6d\151\156\x61\x74\145\x5f\x61\x63\x63\157\x75\156\164": $result = dockern8n_TerminateAccount($params); break; case "\163\165\x73\160\145\156\x64\x5f\x61\x63\x63\157\165\x6e\164": $result = dockern8n_SuspendAccount($params); break; case "\x75\156\163\165\x73\160\x65\156\144\137\x61\x63\143\157\165\x6e\164": $result = dockern8n_UnsuspendAccount($params); break; default: $result = "\125\156\153\156\x6f\x77\x6e\40\141\x63\164\x69\157\x6e\72\40" . $job->action; } $status = $result === "\163\165\x63\143\145\163\163" ? "\143\157\155\160\x6c\x65\164\x65\x64" : "\x66\x61\151\x6c\145\x64"; \WHMCS\Module\Server\Dockern8n\JobQueue::update($job->id, $status, $result); } catch (Exception $e) { $status = $job->attempts >= 3 ? "\x66\x61\151\x6c\x65\144" : "\160\x65\156\x64\151\x6e\147"; \WHMCS\Module\Server\Dockern8n\JobQueue::update($job->id, $status, $e->getMessage()); } } } catch (Exception $e) { } }); goto sygDL; i4nxm: add_hook("\x43\154\x69\145\156\164\x41\162\x65\x61\x50\x72\x69\x6d\141\162\171\x53\151\144\145\x62\141\x72", 1, function (MenuItem $primarySidebar) { $serviceId = (int) ($_REQUEST["\x69\144"] ?? 0); if (!$serviceId) { return; } $service = Capsule::table("\x74\x62\154\150\157\163\x74\151\156\x67")->join("\x74\x62\x6c\x70\162\157\144\165\143\x74\x73", "\164\x62\x6c\x68\x6f\x73\x74\x69\x6e\x67\x2e\x70\141\143\x6b\x61\x67\145\151\144", "\75", "\x74\142\x6c\x70\x72\157\x64\165\143\164\x73\x2e\151\144")->where("\x74\142\x6c\150\x6f\x73\164\x69\156\x67\56\151\x64", $serviceId)->where("\x74\142\154\160\162\157\x64\x75\x63\x74\163\56\x73\x65\162\166\145\162\x74\x79\160\x65", "\144\x6f\143\153\x65\162\x6e\70\156")->first(); if (!$service) { return; } if ($primarySidebar->hasChildren()) { foreach ($primarySidebar->getChildren() as $child) { $primarySidebar->removeChild($child->getName()); } } }); goto y2vts; sygDL: add_hook("\x41\144\155\151\x6e\x41\162\x65\141\106\157\157\164\145\x72\x4f\x75\164\160\165\x74", 1, function ($vars) { if (strpos($_SERVER["\122\x45\x51\125\x45\x53\124\x5f\125\122\111"], "\x63\154\x69\145\156\164\x73\163\145\x72\x76\x69\x63\x65\x73\56\x70\150\x70") === false) { return ''; } return "\12\x3c\x73\143\x72\151\160\x74\76\xa\144\x6f\143\x75\x6d\145\156\164\56\141\144\144\105\166\145\x6e\164\x4c\151\x73\164\x65\156\145\x72\x28\x22\104\x4f\115\x43\157\x6e\x74\145\156\164\x4c\157\141\144\x65\x64\42\x2c\40\146\165\x6e\143\164\x69\x6f\156\50\51\40\x7b\12\x20\40\40\40\57\x2f\40\106\151\156\x64\x20\x74\150\x65\40\x73\x74\x61\164\165\x73\40\x64\162\x6f\160\x64\x6f\167\156\xa\40\40\x20\40\x76\x61\162\40\x73\164\x61\x74\165\x73\123\145\154\x65\143\x74\x20\75\x20\144\x6f\143\165\x6d\x65\x6e\164\56\161\x75\145\162\171\123\145\154\145\143\x74\x6f\x72\x28\x22\x73\x65\x6c\145\x63\x74\x5b\156\141\x6d\x65\75\47\x64\157\155\141\x69\156\163\164\x61\x74\x75\163\x27\x5d\42\x29\73\12\40\x20\x20\40\151\x66\x20\x28\41\x73\x74\141\x74\165\163\123\x65\154\145\x63\x74\51\x20\162\145\x74\x75\162\x6e\73\xa\40\40\x20\x20\xa\x20\x20\x20\x20\57\57\x20\106\151\x6e\144\40\x6d\x6f\144\x75\154\x65\x20\x63\x6f\x6d\x6d\x61\x6e\144\40\142\165\164\164\157\x6e\163\12\40\40\40\x20\166\x61\x72\x20\142\165\x74\164\157\x6e\x73\40\75\x20\144\x6f\143\165\x6d\145\x6e\x74\56\x71\165\x65\x72\x79\x53\x65\154\145\143\x74\x6f\x72\x41\154\154\x28\42\x69\156\160\x75\164\x5b\164\171\160\145\x3d\x27\x73\x75\x62\155\x69\x74\47\135\x22\51\x3b\xa\40\x20\x20\40\x76\141\x72\40\163\165\163\x70\x65\156\x64\x42\164\x6e\40\75\x20\x6e\165\x6c\154\73\xa\40\x20\40\40\166\141\x72\x20\x75\x6e\x73\x75\163\x70\145\x6e\x64\102\164\x6e\40\75\x20\156\165\154\x6c\x3b\xa\x20\x20\40\x20\xa\x20\x20\40\x20\x62\165\x74\164\x6f\156\163\56\x66\x6f\x72\105\x61\143\x68\x28\x66\165\x6e\x63\164\151\157\x6e\50\142\x74\x6e\51\x20\x7b\xa\x20\x20\x20\40\x20\x20\x20\40\151\x66\40\50\x62\x74\x6e\56\166\x61\154\x75\x65\40\75\75\x3d\x20\42\x53\x75\x73\160\x65\156\144\x22\x29\40\163\165\163\160\x65\156\144\x42\x74\x6e\x20\75\x20\x62\164\x6e\73\xa\x20\40\x20\40\40\x20\x20\40\x69\x66\x20\x28\x62\164\156\x2e\x76\141\154\165\145\40\75\75\x3d\40\x22\125\x6e\163\x75\163\x70\145\156\x64\42\x29\40\165\x6e\163\x75\163\x70\145\x6e\x64\102\164\156\40\75\40\142\x74\x6e\x3b\xa\x20\x20\x20\40\x7d\x29\73\xa\40\40\40\x20\xa\40\x20\40\40\146\165\x6e\x63\164\x69\x6f\156\40\x75\x70\144\141\x74\145\x42\x75\164\x74\x6f\x6e\163\50\x29\40\x7b\xa\40\x20\40\40\x20\x20\40\40\166\x61\x72\x20\x73\164\141\x74\165\x73\40\x3d\x20\x73\164\x61\164\165\x73\x53\145\154\x65\143\164\56\x76\x61\x6c\x75\145\73\12\x20\x20\40\x20\x20\x20\40\40\xa\x20\x20\x20\40\40\x20\x20\40\151\146\40\50\x73\x75\163\x70\145\156\x64\102\x74\156\x20\46\46\40\165\156\163\x75\163\160\x65\x6e\144\102\164\156\51\40\x7b\12\40\40\40\x20\x20\40\x20\x20\40\40\40\x20\x69\146\x20\50\x73\164\x61\x74\165\163\x20\x3d\75\75\40\x22\101\143\164\151\166\145\42\x29\40\x7b\xa\x20\40\40\x20\x20\x20\40\x20\x20\40\40\x20\x20\40\x20\40\x2f\57\40\123\x68\x6f\x77\40\x53\165\x73\160\x65\x6e\x64\x2c\40\150\x69\x64\x65\40\125\x6e\163\165\163\160\x65\x6e\x64\12\40\40\x20\40\x20\40\40\40\40\x20\x20\x20\x20\40\40\40\x73\165\x73\x70\x65\x6e\x64\x42\164\x6e\x2e\x73\164\171\x6c\145\x2e\x64\151\x73\x70\x6c\141\171\40\75\x20\42\x22\x3b\xa\40\x20\40\40\x20\40\x20\x20\40\x20\40\40\x20\40\x20\x20\x75\x6e\163\165\x73\160\145\x6e\144\102\164\x6e\56\163\164\x79\x6c\x65\56\144\151\163\x70\x6c\x61\171\x20\x3d\x20\x22\x6e\157\x6e\x65\42\x3b\12\40\40\40\40\x20\40\x20\40\40\40\40\40\x7d\x20\145\154\x73\x65\x20\151\146\x20\x28\x73\164\141\164\x75\163\x20\75\75\x3d\x20\x22\x53\x75\x73\x70\145\x6e\144\145\144\42\51\x20\173\xa\x20\40\x20\40\x20\40\x20\x20\x20\x20\x20\40\x20\40\x20\40\57\x2f\x20\x48\x69\144\145\x20\123\165\163\160\145\x6e\144\x2c\40\x73\150\x6f\x77\x20\125\x6e\x73\x75\163\x70\145\x6e\x64\12\x20\x20\40\40\40\x20\x20\x20\40\40\40\40\x20\x20\40\x20\x73\x75\x73\x70\145\156\144\x42\x74\156\56\x73\x74\171\154\x65\x2e\x64\x69\163\160\154\x61\171\40\75\40\42\156\x6f\x6e\145\42\73\12\40\x20\40\40\40\40\x20\40\40\40\40\x20\40\40\x20\x20\165\156\x73\165\163\160\x65\x6e\144\x42\164\x6e\56\163\x74\171\154\x65\56\144\151\163\160\154\x61\171\40\75\x20\42\42\x3b\xa\40\40\x20\40\40\x20\x20\x20\40\x20\40\x20\175\x20\145\x6c\163\145\40\173\xa\x20\x20\x20\x20\40\x20\x20\x20\40\x20\40\40\40\x20\40\40\x2f\57\40\106\x6f\x72\x20\157\x74\x68\145\x72\x20\x73\164\141\x74\165\x73\145\163\40\50\120\145\x6e\144\151\x6e\x67\x2c\x20\103\x61\156\143\145\154\154\145\144\54\x20\145\x74\x63\x29\54\x20\x73\150\157\x77\40\142\x6f\x74\150\40\157\162\40\143\165\163\164\x6f\155\151\172\145\12\x20\x20\40\40\x20\40\40\x20\x20\x20\40\40\40\x20\40\x20\x73\x75\163\x70\x65\156\144\102\x74\156\56\163\x74\x79\x6c\x65\x2e\x64\151\x73\160\154\x61\171\40\x3d\x20\42\x22\73\xa\40\40\x20\x20\40\x20\40\40\x20\40\40\x20\x20\x20\x20\x20\x75\156\163\x75\163\160\x65\x6e\144\102\164\156\x2e\163\x74\x79\154\x65\x2e\x64\x69\x73\x70\x6c\x61\171\x20\x3d\40\42\42\x3b\12\40\40\40\x20\40\40\40\x20\40\40\x20\x20\175\xa\x20\x20\40\40\40\40\40\x20\x7d\12\x20\40\40\40\x7d\12\x20\40\x20\40\12\x20\40\40\x20\x2f\57\x20\x49\156\151\164\x69\141\x6c\x20\165\160\x64\x61\164\145\12\x20\40\40\40\165\x70\144\x61\164\x65\102\165\164\x74\157\156\x73\x28\x29\73\12\x20\x20\x20\40\xa\40\x20\40\40\57\57\x20\125\160\144\x61\164\x65\x20\x6f\x6e\x20\x73\164\141\164\165\163\40\143\x68\141\156\x67\145\xa\x20\40\x20\x20\x73\164\x61\164\165\163\123\145\x6c\x65\x63\x74\x2e\x61\x64\x64\105\166\x65\156\164\x4c\x69\x73\164\x65\x6e\145\x72\50\x22\x63\150\x61\x6e\x67\145\42\54\x20\x75\x70\x64\141\164\145\102\x75\x74\x74\x6f\x6e\163\51\x3b\xa\175\51\x3b\xa\x3c\57\163\x63\162\x69\160\164\x3e"; });