<?php
 if (!defined("\x57\110\115\x43\x53")) { die("\x54\150\x69\x73\40\x66\x69\x6c\145\40\143\141\156\156\x6f\x74\40\142\145\40\141\x63\143\145\x73\x73\145\144\40\144\x69\x72\145\143\x74\154\x79"); } function dockern8n_GetNginxTemplate($type, $domain, $serviceId, $cpuLimit = 0, $memoryLimit = 0, $version = "\x6c\141\164\145\x73\164", $username = '', $password = '', $letsencryptEmail = '', $timezone = "\101\163\151\141\x2f\104\x68\141\x6b\x61", $existingCreds = array(), $userId = 0) { $domainHost = preg_replace("\43\136\150\164\164\x70\163\77\72\57\x2f\x23", '', $domain); $domainHost = rtrim($domainHost, "\x2f"); if (empty($letsencryptEmail)) { $letsencryptEmail = "\141\x64\155\x69\156\x40{$domainHost}"; } $credentials = array("\x64\157\155\x61\x69\156" => "\x68\164\164\160\163\72\x2f\x2f" . $domainHost, "\143\x72\x65\x61\164\145\144\137\141\x74" => date("\x59\x2d\155\55\x64\40\110\x3a\x69\x3a\x73"), "\160\162\157\x78\x79\x5f\x74\171\x70\x65" => "\x6e\x67\x69\x6e\170"); $dockerCompose = ''; if (!function_exists("\144\157\143\x6b\145\162\x6e\x38\x6e\x5f\107\145\x6e\145\162\141\x74\x65\120\141\x73\x73\x77\x6f\162\144")) { require_once __DIR__ . "\57\x44\x6f\x6d\x61\x69\156\110\x65\x6c\x70\x65\162\x73\x2e\160\150\160"; } $encryptionKey = $existingCreds["\x65\156\x63\162\x79\160\x74\151\157\156\137\x6b\x65\171"] ?? dockern8n_GeneratePassword(32); $n8nUser = $username ?: $existingCreds["\x75\163\x65\162\x6e\141\x6d\145"] ?? "\x61\144\x6d\x69\x6e"; $n8nPass = $password ?: $existingCreds["\160\141\x73\163\167\x6f\162\x64"] ?? dockern8n_GeneratePassword(); $credentials["\165\x73\x65\x72\x6e\x61\155\145"] = $n8nUser; $credentials["\160\x61\163\x73\x77\x6f\x72\x64"] = $n8nPass; $credentials["\x65\156\x63\x72\x79\160\164\151\157\x6e\x5f\153\x65\x79"] = $encryptionKey; $credentials["\x74\145\155\x70\x6c\141\x74\x65"] = $type; $credentials["\160\157\x73\164\x67\162\145\x73\137\160\141\x73\163\167\157\162\x64"] = $existingCreds["\x70\157\x73\164\147\162\x65\163\x5f\x70\x61\x73\163\x77\157\x72\144"] ?? dockern8n_GeneratePassword(); $deployBlock = ''; if (!empty($cpuLimit) && $cpuLimit !== "\60" || !empty($memoryLimit) && $memoryLimit !== "\x30") { $deployBlock = "\12\40\x20\40\x20\144\x65\160\x6c\x6f\171\72\xa\x20\40\x20\40\40\40\162\x65\163\x6f\x75\x72\x63\x65\163\72\12\x20\40\40\40\40\40\x20\40\154\x69\155\151\164\x73\72"; if (!empty($cpuLimit) && $cpuLimit !== "\x30") { $deployBlock .= "\12\x20\x20\x20\40\x20\x20\40\x20\x20\40\143\x70\165\x73\x3a\40\47{$cpuLimit}\x27"; } if (!empty($memoryLimit) && $memoryLimit !== "\60") { $deployBlock .= "\12\x20\x20\40\40\x20\x20\x20\x20\x20\x20\x6d\x65\155\x6f\x72\x79\72\x20\x27{$memoryLimit}\47"; } } $commonEnv = "\x20\40\x20\40\x20\40\55\40\47\x4e\70\116\137\x48\117\x53\124\x3d{$domainHost}\47\xa\x20\x20\40\40\x20\x20\x2d\40\x27\x4e\70\x4e\137\x45\104\x49\124\x4f\x52\x5f\102\101\123\105\x5f\125\x52\114\x3d\150\164\x74\x70\163\72\57\57{$domainHost}\x27\xa\40\x20\x20\40\40\40\55\40\x27\127\105\102\110\x4f\x4f\x4b\137\x55\x52\114\75\150\164\164\160\x73\x3a\x2f\57{$domainHost}\47\12\40\40\x20\40\x20\40\55\40\47\107\x45\116\x45\122\x49\103\x5f\124\111\115\x45\x5a\x4f\x4e\x45\x3d{$timezone}\47\12\40\40\x20\40\x20\40\x2d\x20\47\x54\x5a\x3d{$timezone}\x27\xa\x20\x20\40\40\40\x20\x2d\40\x27\116\70\x4e\137\x45\116\x43\122\x59\120\x54\111\117\116\137\x4b\x45\131\x3d{$encryptionKey}\47\12\40\x20\40\x20\x20\40\55\x20\x27\x4e\x38\116\137\123\105\x43\x55\122\x45\137\103\x4f\117\113\x49\105\75\164\x72\x75\145\47\xa\x20\40\x20\40\x20\x20\55\40\x27\x56\111\x52\x54\x55\101\114\x5f\x48\117\123\124\x3d{$domainHost}\x27\12\x20\40\x20\x20\x20\40\x2d\40\47\x56\x49\122\x54\x55\101\x4c\x5f\120\117\x52\124\x3d\x35\66\x37\70\47\12\40\x20\x20\x20\40\x20\55\40\47\114\105\x54\x53\x45\116\x43\x52\x59\120\x54\x5f\x48\117\x53\x54\x3d{$domainHost}\x27\12\x20\40\x20\x20\x20\40\55\40\47\x4c\x45\x54\123\105\x4e\103\122\131\120\124\x5f\x45\x4d\101\x49\114\75{$letsencryptEmail}\x27"; $prefix = "{$userId}\55{$serviceId}"; if ($userId > 0) { $puqContainer = strpos($domainHost, $prefix . "\56") === 0 ? $domainHost : "{$prefix}\56{$domainHost}"; } else { $puqContainer = "\163\145\162\x76\x69\143\145\x2d{$serviceId}\55\x6e\x38\156"; } $postgresContainer = "{$puqContainer}\x2d\160\157\163\x74\x67\x72\145\163"; switch ($type) { case "\x6e\70\x6e\55\163\x71\x6c\x69\x74\x65": $dockerCompose = "\163\x65\162\166\x69\x63\145\163\x3a\xa\40\40\x6e\70\x6e\72\xa\40\x20\x20\40\x69\x6d\141\x67\x65\x3a\40\47\x6e\70\x6e\151\x6f\57\x6e\70\x6e\47\xa\40\x20\40\40\x63\x6f\x6e\x74\x61\x69\x6e\145\x72\x5f\156\x61\155\x65\x3a\40{$puqContainer}\12\x20\x20\40\40\162\145\x73\164\x61\162\x74\x3a\x20\x75\x6e\x6c\145\x73\x73\55\163\x74\157\160\160\x65\144{$deployBlock}\12\40\x20\x20\40\x65\156\x76\151\162\x6f\x6e\x6d\x65\x6e\x74\x3a\xa{$commonEnv}\xa\x20\x20\x20\40\x65\170\160\x6f\163\145\x3a\xa\40\x20\40\x20\40\40\55\x20\47\65\x36\x37\70\x27\12\40\40\40\40\x6e\x65\x74\167\157\162\153\163\x3a\12\40\x20\40\40\x20\x20\55\40\156\147\x69\156\x78\55\x70\162\x6f\170\171\x5f\167\x65\x62\12\40\x20\40\x20\x76\157\x6c\165\x6d\145\163\72\12\x20\40\x20\x20\x20\40\55\40\47\x6e\x38\x6e\55\x64\x61\164\x61\72\57\x68\157\155\145\x2f\x6e\157\144\145\x2f\x2e\x6e\70\x6e\47\xa\x20\40\40\x20\150\145\141\x6c\x74\150\143\150\x65\143\153\x3a\12\x20\40\40\x20\x20\x20\164\x65\163\x74\72\40\x5b\47\x43\115\x44\55\123\x48\x45\114\114\47\54\x20\47\x77\x67\x65\x74\40\x2d\161\117\55\x20\x68\x74\x74\x70\72\57\57\61\x32\x37\56\x30\56\x30\56\x31\72\x35\x36\x37\70\x2f\x68\x65\x61\154\164\150\x7a\40\x7c\x7c\40\145\x78\x69\164\x20\x31\x27\x5d\12\x20\40\40\40\40\x20\151\156\164\x65\162\x76\141\x6c\x3a\x20\x31\60\163\xa\40\x20\40\x20\40\x20\164\x69\x6d\x65\157\165\x74\72\x20\x31\x35\x73\12\x20\40\x20\x20\x20\x20\x72\145\x74\x72\151\145\x73\72\40\x32\60\xa\40\40\40\x20\40\x20\163\164\x61\x72\164\137\160\x65\162\x69\x6f\x64\72\40\64\65\163\xa\12\x76\x6f\154\x75\155\145\x73\x3a\xa\40\x20\156\x38\x6e\x2d\144\141\164\141\x3a\xa\12\x6e\145\x74\167\x6f\162\x6b\163\x3a\12\40\40\156\147\151\x6e\170\55\x70\x72\x6f\170\171\137\167\145\142\x3a\12\40\x20\x20\x20\145\170\164\x65\162\156\141\x6c\72\40\x74\x72\165\x65"; break; case "\x6e\x38\156": case "\156\x38\156\55\x70\147\163\161\x6c": $postgresPassword = $credentials["\160\x6f\163\x74\147\x72\x65\x73\137\x70\x61\x73\163\x77\x6f\x72\x64"]; $dockerCompose = "\x73\145\162\x76\x69\x63\x65\x73\72\xa\40\x20\156\70\156\x3a\12\40\x20\x20\40\x69\155\141\147\145\72\40\x27\x64\x6f\x63\153\145\162\x2e\x6e\70\x6e\x2e\x69\x6f\57\156\70\156\151\x6f\57\156\x38\x6e\72{$version}\47\12\40\x20\40\x20\x63\x6f\156\164\141\x69\x6e\x65\162\x5f\x6e\141\155\x65\72\40{$puqContainer}\12\40\x20\x20\x20\x72\x65\163\x74\x61\x72\164\72\40\165\x6e\x6c\x65\x73\x73\x2d\163\x74\157\x70\x70\145\x64{$deployBlock}\12\40\40\40\x20\143\x6f\155\155\x61\x6e\x64\x3a\40\163\x74\141\x72\164\12\x20\x20\40\x20\x65\x6e\166\x69\x72\x6f\156\x6d\x65\x6e\x74\72\12{$commonEnv}\12\x20\40\x20\40\x20\x20\x2d\x20\x27\104\102\x5f\124\x59\120\105\75\160\157\163\164\147\x72\145\163\144\142\x27\12\x20\40\x20\40\40\x20\55\x20\x27\104\102\x5f\x50\x4f\123\x54\107\122\x45\x53\x44\x42\x5f\104\101\x54\x41\102\101\123\x45\x3d\156\x38\156\47\12\40\x20\x20\x20\40\40\x2d\x20\47\104\102\137\x50\x4f\x53\124\x47\122\x45\123\x44\102\137\x48\x4f\x53\x54\75\x70\157\x73\164\x67\x72\145\163\161\154\x27\xa\x20\x20\40\x20\x20\x20\x2d\40\x27\x44\x42\x5f\120\x4f\x53\124\107\122\x45\123\104\x42\x5f\x50\x4f\122\124\75\x35\64\x33\62\47\12\40\40\40\40\x20\x20\x2d\40\47\104\x42\x5f\x50\117\x53\124\x47\x52\x45\x53\x44\x42\137\x55\123\x45\x52\x3d\x6e\x38\x6e\x27\xa\x20\x20\40\x20\x20\40\x2d\x20\x27\x44\x42\x5f\x50\117\123\124\x47\x52\105\x53\104\102\x5f\123\x43\110\105\x4d\101\x3d\160\x75\142\x6c\x69\x63\x27\xa\40\40\40\40\x20\40\x2d\x20\x27\x44\x42\x5f\x50\117\123\x54\x47\122\105\x53\x44\x42\137\x50\101\123\x53\127\x4f\x52\104\x3d{$postgresPassword}\47\12\40\x20\40\x20\145\170\160\x6f\x73\x65\72\12\40\x20\40\x20\x20\x20\55\x20\47\x35\66\x37\x38\47\12\40\40\40\40\x6e\x65\x74\167\157\x72\x6b\163\72\12\x20\40\40\40\40\x20\x2d\40\x64\x65\146\141\165\x6c\x74\xa\x20\40\x20\x20\40\x20\55\40\156\147\151\156\170\x2d\x70\162\x6f\x78\x79\137\x77\145\142\xa\x20\x20\40\40\x76\x6f\x6c\165\x6d\145\163\x3a\12\40\40\40\40\40\40\55\40\x27\156\70\156\55\x64\141\164\141\72\x2f\150\157\155\145\x2f\x6e\157\144\145\57\56\156\70\156\x27\xa\x20\40\x20\40\150\145\x61\154\164\x68\143\x68\145\x63\x6b\x3a\xa\40\x20\x20\x20\x20\40\164\145\163\x74\x3a\40\x5b\47\103\115\x44\55\x53\x48\105\114\114\x27\x2c\40\x27\167\147\x65\x74\x20\55\x2d\x6e\x6f\x2d\x76\145\x72\x62\x6f\163\x65\x20\55\x2d\x74\162\151\x65\163\x3d\x31\40\55\55\x73\x70\151\144\x65\x72\x20\150\x74\x74\160\72\57\x2f\x31\62\x37\56\x30\56\60\x2e\61\x3a\x35\x36\x37\70\x2f\x68\x65\x61\154\x74\150\x7a\x20\174\x7c\x20\x65\170\151\x74\40\61\47\135\12\x20\40\x20\x20\x20\40\151\x6e\x74\145\x72\x76\141\x6c\72\40\x31\60\163\12\x20\x20\40\40\x20\40\x74\151\155\x65\x6f\165\164\72\x20\65\163\xa\x20\40\40\40\40\40\x72\145\x74\x72\x69\x65\x73\x3a\40\x31\60\12\40\x20\x20\40\40\x20\163\x74\x61\162\164\137\x70\x65\162\151\157\144\72\40\x33\x30\x73\12\x20\40\x20\40\144\x65\160\x65\156\x64\163\x5f\157\x6e\72\xa\x20\40\40\x20\x20\x20\x70\157\x73\164\x67\162\145\x73\x71\x6c\x3a\12\40\x20\40\x20\x20\40\x20\40\143\x6f\156\144\x69\x74\x69\x6f\x6e\x3a\x20\163\145\x72\x76\151\143\145\x5f\x68\x65\x61\x6c\164\150\171\12\12\40\x20\x70\x6f\x73\x74\147\162\x65\163\x71\154\x3a\xa\40\40\x20\x20\x69\155\141\147\145\72\x20\x27\x70\157\x73\x74\147\162\x65\163\x3a\x31\x36\55\x61\x6c\160\x69\x6e\145\x27\xa\40\x20\40\40\x63\157\156\x74\x61\x69\156\145\x72\137\156\x61\155\x65\x3a\x20{$postgresContainer}\12\40\x20\40\40\162\x65\163\164\141\162\164\72\40\165\156\x6c\x65\163\163\55\x73\x74\157\160\160\145\144\xa\x20\40\x20\40\x76\x6f\154\165\155\x65\x73\x3a\12\40\40\x20\x20\40\x20\x2d\x20\x27\160\x6f\163\x74\x67\162\x65\163\161\154\55\144\x61\164\141\72\x2f\x76\141\162\x2f\x6c\151\x62\x2f\160\157\x73\x74\147\x72\145\163\x71\154\57\x64\141\x74\x61\47\xa\x20\x20\40\x20\x65\156\x76\x69\x72\x6f\156\155\145\156\164\x3a\12\x20\40\x20\40\40\40\x2d\x20\x27\x50\117\123\x54\107\122\x45\123\137\125\x53\105\x52\75\156\70\x6e\x27\12\40\40\40\x20\x20\40\x2d\x20\x27\120\x4f\x53\124\x47\x52\105\x53\x5f\120\101\x53\x53\x57\117\x52\104\x3d{$postgresPassword}\x27\12\40\x20\x20\40\x20\x20\55\x20\x27\120\x4f\123\x54\x47\x52\105\123\x5f\x44\102\75\x6e\70\x6e\47\12\40\x20\x20\40\150\145\141\x6c\164\x68\x63\x68\x65\x63\153\72\xa\x20\x20\x20\40\40\40\164\145\163\164\72\x20\133\47\x43\115\x44\x2d\123\x48\105\x4c\114\x27\x2c\x20\x27\x70\147\x5f\151\163\x72\x65\x61\144\171\40\55\x68\x20\154\157\143\141\154\150\x6f\163\x74\x20\55\x55\x20\x6e\x38\156\x20\x7c\174\x20\145\x78\151\164\40\61\x27\135\xa\x20\x20\40\40\x20\x20\x69\156\164\145\x72\166\141\x6c\72\x20\65\x73\xa\x20\x20\x20\40\40\x20\164\x69\155\145\157\x75\x74\x3a\40\x35\x73\xa\40\40\x20\x20\40\x20\x72\x65\164\x72\151\x65\163\x3a\40\x31\60\12\40\40\40\x20\x20\40\163\164\x61\162\x74\137\160\x65\x72\x69\157\x64\x3a\x20\61\x30\x73\12\xa\166\157\154\165\x6d\x65\163\x3a\xa\40\40\x6e\70\156\55\x64\x61\x74\x61\72\xa\x20\x20\160\x6f\163\164\147\162\145\x73\x71\x6c\55\144\141\164\x61\72\12\12\156\145\164\x77\157\162\x6b\163\x3a\xa\x20\x20\x6e\147\151\156\x78\x2d\160\162\x6f\170\171\137\x77\145\142\x3a\12\x20\40\x20\40\145\170\164\x65\162\156\141\x6c\x3a\x20\164\162\x75\x65"; break; case "\156\x38\156\x2d\x71\165\x65\x75\x65": $postgresPassword = $credentials["\160\157\x73\x74\147\x72\x65\x73\x5f\160\141\163\x73\x77\157\162\x64"]; $credentials["\x6d\x6f\x64\x65"] = "\x71\x75\x65\165\x65"; $dockerCompose = "\x73\x65\x72\x76\151\x63\145\x73\72\12\40\x20\x6e\70\x6e\72\12\x20\x20\x20\40\151\155\141\147\145\x3a\40\x27\144\157\143\153\x65\162\56\156\70\156\x2e\151\x6f\x2f\156\70\156\x69\157\x2f\156\70\x6e\x3a{$version}\47\12\x20\x20\40\40\143\157\x6e\x74\x61\151\x6e\x65\162\x5f\x6e\141\x6d\x65\x3a\x20{$puqContainer}\12\40\x20\40\40\x72\x65\163\x74\141\162\164\x3a\40\x75\156\x6c\145\x73\x73\x2d\x73\164\157\x70\x70\145\144{$deployBlock}\12\40\x20\x20\40\143\157\155\155\141\x6e\144\x3a\40\x73\164\141\162\x74\xa\40\x20\x20\40\145\x6e\166\x69\x72\157\x6e\155\x65\156\164\x3a\xa{$commonEnv}\12\40\x20\x20\40\40\40\55\40\x27\104\102\x5f\124\x59\120\105\x3d\x70\157\x73\x74\x67\162\145\163\x64\142\47\xa\40\40\40\40\x20\x20\55\40\x27\x44\x42\x5f\120\117\123\x54\x47\122\105\123\x44\x42\x5f\x44\101\124\101\x42\101\x53\x45\75\x6e\x38\x6e\x27\xa\40\40\40\40\x20\40\x2d\40\47\x44\x42\137\x50\x4f\x53\124\107\122\x45\123\x44\102\137\x48\x4f\x53\124\75\160\x6f\x73\x74\147\162\x65\163\x71\x6c\47\xa\x20\40\40\x20\40\40\55\x20\x27\104\102\137\x50\117\123\124\107\x52\x45\x53\104\102\137\120\x4f\x52\x54\x3d\65\x34\63\x32\x27\xa\x20\x20\x20\40\40\x20\x2d\x20\47\x44\x42\137\x50\117\x53\x54\x47\122\x45\123\x44\102\x5f\x55\123\x45\x52\75\156\70\156\x27\12\x20\40\x20\x20\40\x20\x2d\40\x27\104\102\137\x50\x4f\123\x54\107\122\105\x53\104\102\x5f\123\103\110\x45\115\101\x3d\160\x75\142\x6c\x69\143\47\12\x20\x20\x20\x20\x20\x20\x2d\40\47\104\102\137\120\x4f\x53\x54\x47\x52\105\123\x44\102\x5f\120\101\123\123\x57\x4f\122\x44\75{$postgresPassword}\x27\12\40\x20\40\x20\x20\x20\55\40\x27\105\x58\x45\103\125\x54\111\x4f\116\x53\x5f\115\x4f\104\105\x3d\x71\165\145\x75\x65\x27\12\40\x20\x20\x20\40\x20\x2d\40\47\x51\x55\105\x55\x45\x5f\102\125\114\114\x5f\x52\x45\x44\x49\123\x5f\x48\x4f\123\x54\x3d\162\145\144\x69\163\47\12\x20\x20\40\x20\x20\x20\55\x20\47\121\125\x45\125\105\x5f\x42\x55\114\114\x5f\122\105\x44\x49\x53\137\x50\x4f\x52\124\75\66\63\67\x39\x27\xa\x20\40\40\x20\x20\40\55\40\x27\121\x55\105\125\x45\x5f\110\x45\101\x4c\124\x48\137\x43\110\x45\103\113\137\101\103\124\x49\x56\105\x3d\164\162\x75\x65\x27\12\40\40\40\x20\x65\x78\160\x6f\163\145\x3a\xa\40\40\40\x20\40\x20\x2d\x20\x27\x35\66\x37\x38\x27\xa\40\x20\40\40\x6e\x65\164\167\157\x72\x6b\163\x3a\12\x20\40\x20\x20\40\40\55\40\x64\x65\146\141\165\x6c\x74\12\40\40\40\40\x20\40\55\40\x6e\147\x69\156\170\55\160\x72\157\x78\171\137\x77\x65\x62\12\40\x20\x20\x20\166\x6f\x6c\x75\155\x65\x73\72\12\40\x20\40\40\x20\x20\55\40\x27\x6e\x38\156\x2d\144\x61\164\x61\72\x2f\150\157\x6d\x65\57\156\157\144\145\57\56\x6e\70\x6e\x27\12\x20\40\x20\40\x68\x65\141\x6c\x74\x68\143\x68\145\143\153\x3a\xa\x20\x20\40\x20\x20\x20\x74\145\163\164\72\40\133\x27\x43\x4d\104\x2d\123\x48\x45\114\x4c\47\54\x20\47\167\x67\145\x74\x20\x2d\161\x4f\55\x20\x68\164\x74\x70\x3a\x2f\57\61\x32\67\x2e\x30\x2e\60\x2e\61\x3a\65\x36\67\70\57\x68\x65\141\x6c\164\x68\172\40\x7c\174\40\x65\170\151\164\40\61\47\135\12\x20\x20\40\x20\x20\40\151\156\x74\145\x72\x76\141\x6c\72\40\x31\60\x73\12\x20\x20\x20\40\x20\x20\x74\x69\155\145\157\165\164\x3a\x20\x31\x30\x73\xa\x20\40\x20\x20\x20\40\162\x65\164\x72\x69\145\163\72\x20\62\60\12\x20\40\40\40\x20\40\163\x74\x61\162\x74\x5f\160\145\162\x69\x6f\x64\x3a\x20\66\x30\x73\12\x20\40\40\40\x64\145\160\x65\x6e\x64\x73\137\x6f\x6e\72\xa\x20\x20\40\40\40\x20\160\x6f\163\x74\147\x72\145\163\x71\x6c\x3a\12\40\40\40\x20\40\x20\40\40\x63\x6f\156\144\x69\x74\151\x6f\x6e\x3a\40\163\x65\162\166\x69\143\145\137\150\145\x61\154\x74\x68\x79\12\x20\40\x20\x20\40\40\162\x65\x64\151\163\x3a\xa\40\x20\40\x20\40\40\40\40\143\157\x6e\144\151\164\x69\157\x6e\72\40\x73\145\162\166\x69\143\145\x5f\x68\x65\141\x6c\x74\150\171\xa\12\x20\x20\x6e\70\156\x2d\x77\x6f\x72\153\x65\162\x3a\12\x20\x20\40\x20\x69\155\x61\x67\x65\72\x20\x27\x64\157\143\x6b\145\x72\56\156\70\156\56\151\157\57\156\70\x6e\x69\x6f\x2f\156\x38\156\72{$version}\47\xa\40\x20\40\x20\x63\157\x6e\x74\x61\x69\x6e\145\x72\137\x6e\x61\x6d\145\72\40{$puqContainer}\x2d\x77\157\x72\153\145\x72\xa\40\x20\x20\x20\162\145\x73\x74\141\162\x74\x3a\x20\165\156\x6c\x65\x73\x73\x2d\163\x74\x6f\160\x70\145\x64\12\40\40\x20\40\143\157\155\x6d\x61\156\x64\x3a\40\x77\x6f\x72\x6b\145\162\xa\40\x20\x20\40\145\156\x76\x69\162\x6f\x6e\x6d\145\x6e\x74\x3a\xa{$commonEnv}\12\40\40\x20\40\40\40\x2d\40\47\104\102\137\x54\131\120\x45\75\x70\157\163\164\147\162\145\x73\144\x62\x27\12\40\x20\40\40\40\x20\55\x20\x27\104\102\x5f\120\x4f\x53\124\x47\x52\x45\x53\x44\102\x5f\x44\101\124\x41\102\x41\x53\105\75\156\x38\156\47\xa\40\x20\x20\x20\x20\x20\x2d\40\47\104\102\137\120\117\123\x54\x47\x52\105\x53\104\x42\x5f\110\117\x53\x54\x3d\x70\x6f\x73\164\x67\x72\x65\x73\x71\x6c\47\xa\x20\x20\x20\x20\40\x20\x2d\x20\47\104\x42\137\120\117\x53\124\x47\122\x45\x53\104\x42\x5f\x50\117\122\x54\x3d\65\x34\x33\62\47\12\40\x20\40\x20\x20\40\55\x20\x27\104\x42\137\x50\117\x53\x54\x47\122\105\123\104\102\x5f\125\123\x45\x52\75\x6e\70\x6e\47\12\x20\40\x20\x20\x20\40\55\40\47\x44\102\137\120\117\x53\x54\x47\122\105\123\104\x42\137\123\x43\x48\105\115\x41\x3d\160\x75\x62\x6c\x69\x63\x27\12\x20\x20\40\40\x20\40\x2d\x20\47\x44\x42\137\120\117\123\124\x47\x52\x45\123\x44\102\137\120\101\123\x53\127\117\122\104\75{$postgresPassword}\x27\xa\40\40\x20\40\x20\x20\55\x20\x27\x45\x58\105\103\x55\124\x49\x4f\x4e\x53\x5f\115\117\104\x45\x3d\161\165\x65\165\x65\47\12\x20\40\x20\40\x20\x20\55\x20\47\121\125\x45\125\x45\137\102\x55\114\114\137\122\x45\x44\111\x53\x5f\x48\117\123\124\75\162\x65\144\x69\163\47\xa\x20\40\x20\40\x20\x20\55\40\47\x51\x55\105\125\105\x5f\x42\125\x4c\x4c\x5f\x52\105\x44\x49\x53\x5f\120\117\122\x54\x3d\x36\63\x37\x39\x27\12\x20\x20\40\40\166\157\x6c\165\x6d\x65\x73\72\12\x20\40\x20\40\x20\x20\x2d\40\x27\156\x38\156\x2d\144\x61\164\141\72\57\x68\x6f\x6d\145\57\156\x6f\x64\x65\57\56\156\70\x6e\47\12\x20\40\x20\40\x64\145\x70\x65\x6e\144\163\137\157\x6e\72\xa\x20\40\x20\x20\40\40\160\x6f\163\x74\x67\162\x65\163\161\154\72\xa\40\40\x20\40\x20\x20\x20\x20\x63\157\x6e\x64\151\x74\x69\157\156\x3a\x20\x73\145\162\166\x69\143\145\137\150\x65\141\x6c\164\150\x79\12\x20\40\x20\40\40\x20\x72\x65\x64\x69\163\72\xa\x20\40\40\40\x20\x20\40\40\x63\x6f\156\x64\x69\x74\151\x6f\x6e\72\40\163\145\162\x76\x69\143\x65\137\x68\145\x61\154\164\150\171\xa\12\x20\x20\x72\145\144\151\x73\72\xa\40\x20\x20\x20\151\155\141\x67\145\x3a\40\47\162\x65\144\x69\163\72\67\55\141\x6c\160\x69\156\x65\x27\12\x20\x20\40\x20\143\x6f\x6e\164\x61\151\156\145\x72\137\x6e\141\155\145\x3a\40{$puqContainer}\x2d\x72\145\144\x69\x73\12\40\x20\x20\40\162\x65\x73\x74\x61\x72\164\72\40\x75\x6e\x6c\x65\163\x73\x2d\163\x74\157\160\x70\145\144\12\40\40\40\x20\x76\157\154\x75\x6d\145\x73\72\12\x20\40\x20\40\40\x20\x2d\x20\x27\x72\x65\144\x69\163\x2d\144\x61\164\x61\x3a\57\144\141\x74\141\47\12\40\x20\x20\x20\150\145\x61\x6c\164\x68\x63\150\145\143\153\x3a\xa\x20\40\40\x20\x20\x20\x74\x65\x73\x74\72\40\133\47\103\115\104\47\x2c\x20\47\162\145\144\x69\x73\x2d\143\154\x69\x27\54\x20\47\160\x69\x6e\x67\47\x5d\xa\40\x20\x20\40\x20\x20\x69\x6e\164\145\x72\166\x61\x6c\72\40\x35\163\12\x20\x20\x20\x20\x20\40\x74\151\x6d\x65\x6f\165\164\x3a\40\65\163\12\x20\40\x20\40\x20\40\162\x65\164\162\151\x65\x73\x3a\40\61\60\12\12\x20\40\160\x6f\x73\164\x67\x72\x65\x73\x71\x6c\x3a\12\40\x20\40\40\x69\155\x61\x67\145\x3a\x20\47\160\x6f\x73\x74\x67\162\145\x73\72\x31\x36\x2d\141\154\x70\151\x6e\x65\x27\xa\40\x20\x20\40\x63\x6f\x6e\x74\141\x69\156\x65\162\137\156\x61\x6d\x65\72\40{$postgresContainer}\12\x20\40\40\40\x72\x65\163\164\x61\x72\x74\x3a\x20\x75\x6e\154\x65\x73\x73\x2d\163\164\x6f\x70\160\145\x64\12\x20\x20\40\x20\x76\x6f\154\x75\155\145\163\72\12\x20\x20\x20\40\x20\40\x2d\x20\x27\160\x6f\x73\164\x67\x72\145\163\161\x6c\55\144\141\164\141\72\57\166\141\162\x2f\x6c\x69\142\x2f\160\157\x73\164\x67\x72\145\163\x71\154\57\144\141\x74\x61\47\12\40\x20\x20\x20\x65\x6e\166\151\x72\x6f\x6e\x6d\x65\x6e\164\72\12\40\40\x20\x20\x20\x20\55\40\47\x50\x4f\123\124\x47\x52\105\x53\x5f\125\x53\105\122\75\x6e\x38\x6e\x27\12\x20\x20\x20\40\40\x20\55\x20\47\x50\x4f\123\x54\x47\x52\105\x53\x5f\120\x41\123\123\127\x4f\x52\104\75{$postgresPassword}\x27\xa\40\x20\x20\x20\x20\40\55\x20\47\x50\117\123\x54\107\x52\105\123\137\104\102\x3d\156\x38\x6e\x27\12\x20\x20\x20\40\150\145\141\154\x74\150\x63\150\x65\143\x6b\x3a\xa\40\40\x20\x20\x20\x20\164\x65\x73\164\72\40\x5b\x27\103\x4d\x44\55\x53\110\105\x4c\114\x27\54\x20\x27\x70\x67\x5f\151\x73\x72\145\141\x64\x79\40\55\125\x20\156\x38\156\x20\55\144\x20\156\x38\x6e\x20\x7c\x7c\40\x65\170\151\x74\x20\x31\x27\135\12\x20\x20\40\40\x20\40\151\x6e\164\145\x72\x76\x61\x6c\x3a\40\65\163\12\40\x20\40\40\40\40\164\151\155\x65\157\165\164\x3a\40\x31\60\x73\12\x20\40\40\40\x20\40\x72\145\x74\162\151\145\163\72\40\63\60\12\x20\x20\40\x20\40\x20\163\x74\141\x72\x74\137\x70\145\x72\151\x6f\144\72\x20\x32\x30\163\12\12\166\x6f\154\165\155\x65\x73\x3a\xa\x20\x20\x6e\70\156\55\144\x61\164\x61\72\xa\x20\x20\x70\157\163\164\147\162\145\163\161\154\55\x64\x61\164\x61\x3a\xa\40\40\162\x65\x64\151\163\55\144\x61\164\141\72\12\xa\156\145\164\x77\157\x72\153\163\72\xa\x20\x20\156\x67\x69\156\x78\55\160\x72\157\x78\171\x5f\x77\x65\142\x3a\12\x20\x20\40\40\x65\x78\164\x65\x72\x6e\x61\154\x3a\x20\x74\162\165\x65"; break; default: throw new Exception("\x54\x65\x6d\x70\154\141\x74\145\40\x74\171\x70\145\40\47{$type}\47\40\156\157\x74\40\x73\165\160\x70\x6f\162\x74\145\144\x2e\x20\125\163\x65\x3a\40\156\70\x6e\x2d\x73\161\x6c\x69\x74\145\54\x20\x6e\x38\x6e\x2d\x70\147\163\x71\154\54\40\x6f\x72\x20\156\x38\156\55\161\x75\x65\165\x65"); } return array("\144\157\x63\x6b\x65\x72\x5f\x63\157\155\160\x6f\163\x65" => $dockerCompose, "\143\x72\x65\144\145\x6e\164\x69\x61\x6c\163" => $credentials); }